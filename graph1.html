<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>å›½é™…è´¸æ˜“åŠ¨æ€æŸ±çŠ¶å›¾</title>
    <!-- ç¡®ä¿åŠ è½½æœ€æ–°ç‰ˆECharts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.2/echarts.min.js"></script>
    <style>
        #main {
            width: 1000px;
            height: 600px;  /* å¿…é¡»æ˜ç¡®æŒ‡å®šå®¹å™¨å°ºå¯¸ */
            margin: 20px auto;
            border: 1px solid #ddd;  /* æ·»åŠ è¾¹æ¡†ç¡®è®¤å®¹å™¨å¯è§ */
        }
    </style>
</head>
<body>
    <!-- ç¡®ä¿å®¹å™¨åœ¨scriptä¹‹å‰å£°æ˜ -->
    <div id="main"></div>

<script>
// ä¿®å¤åçš„æ•°æ®æ ¼å¼
const rawData = {
    years: [2018, 2019, 2020, 2021, 2022, 2023, 2024],
    regions: [
        { name: 'ç¾å›½', data: [13.7,11.8,11.7,12.5,12.01,11.17,11.11], flag: 'ğŸ‡ºğŸ‡¸' },
        { name: 'æ¬§ç›Ÿ', data: [14.8,15.4,13.7,13.5,13.42,13.45,13.66], flag: 'ğŸ‡ªğŸ‡º' },
        { name: 'ä¸œå—äºšå›½å®¶è”ç›Ÿ', data: [12.7,14,15,14.5,15.49,15.8,15.88], flag: 'ASEAN' },
        { name: 'æ—¥æœ¬', data: [7.1,6.9,7.6,6.1,5.66,5.36,5], flag: 'ğŸ‡¯ğŸ‡µ' },
        { name: 'éŸ©å›½', data: [6.8,6.2,7.5,6.0,5.73,5.23,5.32], flag: 'ğŸ‡°ğŸ‡·' },
        { name: 'ä¸­å›½é¦™æ¸¯', data: [6.7,6.3,6.9,6.0,5.05,4.85,5.03], flag: 'ğŸ‡­ğŸ‡°' },
        { name: 'ä¸­å›½å°æ¹¾', data: [4.9,5,6.6,5.4,5.66,4.51,4.75], flag: 'ğŸ‡¨ğŸ‡³' },
        { name: 'æ¾³å¤§åˆ©äºš', data: [3.3,3.3,4.8,3.8,4.47,3.86,3.43], flag: 'ğŸ‡¦ğŸ‡º' }
    ]
};

// ç¡®ä¿DOMåŠ è½½å®Œæˆåæ‰§è¡Œ
document.addEventListener('DOMContentLoaded', function() {
    const chart = echarts.init(document.getElementById('main'));
    let currentYearIndex = 0;

    const option = {
        grid: { top: 60, bottom: 30, left: 150, right: 80 },
        xAxis: {
            type: 'value',
            axisLabel: { formatter: '{value}%' }
        },
        yAxis: {
            type: 'category',
            inverse: true,
            axisLabel: {
                formatter: (params) => {
                    const region = rawData.regions.find(r => r.name === params);
                    return `${params} ${region.flag}`;
                },
                rich: { flag: { fontSize: 24 } }
            },
            data: [] // åˆå§‹åŒ–ç©ºæ•°æ®
        },
        series: [{
            type: 'bar',
            realtimeSort: true,
            label: {
                show: true,
                position: 'right',
                formatter: '{c}%'
            }
        }]
    };

    // åˆå§‹åŒ–å›¾è¡¨é…ç½®
    chart.setOption(option);

    // æ•°æ®æ›´æ–°å‡½æ•°
    function updateChart() {
        const year = rawData.years[currentYearIndex];
        const sourceData = rawData.regions.map(region => ({
            name: region.name,
            value: region.data[currentYearIndex]
        })).sort((a, b) => b.value - a.value);

        chart.setOption({
            yAxis: { data: sourceData.map(item => item.name) },
            series: [{
                data: sourceData,
                itemStyle: {
                    color: function(params) {
                        // è‡ªå®šä¹‰é¢œè‰²é€»è¾‘
                        const colors = {
                            'ç¾å›½': '#669ABA', 'æ¬§ç›Ÿ': '#012F48', 
                            'ä¸œå—äºšå›½å®¶è”ç›Ÿ': '#BE1420', 'æ—¥æœ¬': '#FBF0D9',
                            'éŸ©å›½': '#7A0101', 'ä¸­å›½é¦™æ¸¯': '#31145141',
                            'ä¸­å›½å°æ¹¾': '#90D543', 'æ¾³å¤§åˆ©äºš': '#404185'
                        };
                        return colors[params.name] || '#5470C6';
                    }
                }
            }],
            title: { 
                text: `${year}å¹´å›½é™…è´¸æ˜“æ•°æ®${year === 2020 ? ' (è‹±å›½è„±æ¬§)' : ''}`,
                left: 'center' 
            }
        });
    }

    // è‡ªåŠ¨æ’­æ”¾
    setInterval(() => {
        currentYearIndex = (currentYearIndex + 1) % rawData.years.length;
        updateChart();
    }, 2000);

    // é¦–æ¬¡æ¸²æŸ“
    updateChart();
});
</script>
</body>
</html>
